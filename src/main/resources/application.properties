# 应用名称
spring.application.name=stock
# 服务器端口
server.port=8080

# 设置Spring Profile为test，以启用DEBUG日志级别
#spring.profiles.active=test

# 数据库配置
spring.datasource.url=jdbc:mysql://120.76.43.179:3306/stock_db?useSSL=false&useServerPrepStmts=true&cachePrepStmts=true&prepStmtCacheSize=250&prepStmtCacheSqlLimit=2048&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true&autoReconnect=true&autoReconnectForPools=true&maxReconnects=3&maxReconnectAttempts=3&waitForReconnectTimeout=10000&socketTimeout=30000&connectTimeout=30000
spring.datasource.username=stock_user
spring.datasource.password=123456

# HikariCP 连接池优化配置
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.leak-detection-threshold=60000

# JPA配置
# Hibernate ddl auto (create, create-drop, validate, update)
spring.jpa.hibernate.ddl-auto=update
# 控制是否将生成的 SQL 语句直接输出到控制台（标准输出流 System.out）
#spring.jpa.show-sql=true

# 全局日志级别设为 DEBUG
#logging.level.root=DEBUG
#logging.level.root=error

# 针对特定包/类设置更细粒度级别（例如监控事务行为）
#logging.level.com.example.stock=TRACE
#logging.level.org.springframework.transaction=TRACE  # 查看事务操作细节‌:ml-citation{ref="2" data="citationList"}
#logging.level.org.springframework.transaction=DEBUG

# 启用批量插入优化
spring.jpa.properties.hibernate.jdbc.batch_size=500
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# 禁止 Jackson 将大数字转换为科学计数法
spring.jackson.parser.allow-numeric-leading-zeros=true
spring.jackson.generator.write-numbers-as-strings=true

# 日志编码配置
logging.charset.file=UTF-8
logging.charset.console=UTF-8
file.encoding=UTF-8

# 设置com.example.stock包的日志级别为DEBUG
logging.level.com.example.stock=DEBUG
