2025-11-15 02:04:29.820 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 8404 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:04:29.821 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:04:29.823 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:04:34.329 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-15 02:04:39.511 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e0847a9
2025-11-15 02:04:39.514 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-15 02:04:39.609 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15 02:04:46.654 [main] WARN  o.s.w.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockApiController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockApiController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockDataFetchService' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\service\StockDataFetchService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
2025-11-15 02:04:46.660 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-15 02:04:46.690 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-15 02:04:46.774 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockApiController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockApiController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockDataFetchService' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\service\StockDataFetchService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1155)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1121)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1056)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockDataFetchService' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\service\StockDataFetchService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1664)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 101 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1320)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1215)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1664)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.client.SinaStockClient] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@70dea4e]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 129 common frames omitted
Caused by: java.lang.NoClassDefFoundError: [Lcom/example/stock/dto/StockDTO;
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2504)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 131 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.stock.dto.StockDTO
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 135 common frames omitted
2025-11-15 02:04:46.794 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.example.stock.service.StockHistoryFetchServiceTest@6bbcb69f]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3bafa95b testClass = com.example.stock.service.StockHistoryFetchServiceTest, locations = [], classes = [com.example.stock.StockApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7ac296f6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@54e041a4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@776a6d9b, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@72d6b3ba, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@163370c2, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@2415fc55, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@cbf767a2], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockApiController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockApiController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockDataFetchService' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\service\StockDataFetchService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1155)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1121)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1056)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockDataFetchService' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\service\StockDataFetchService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1664)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 101 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sinaStockClient': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1320)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1215)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1664)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.client.SinaStockClient] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@70dea4e]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 129 common frames omitted
Caused by: java.lang.NoClassDefFoundError: [Lcom/example/stock/dto/StockDTO;
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2504)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 131 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.stock.dto.StockDTO
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 135 common frames omitted
2025-11-15 02:05:10.227 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 10152 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:05:10.229 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:05:10.230 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:05:15.755 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-15 02:05:26.324 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f581211
2025-11-15 02:05:26.325 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-15 02:05:26.382 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15 02:05:31.039 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-15 02:05:31.938 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Started StockHistoryFetchServiceTest in 23.079 seconds (process running for 25.712)
2025-11-15 02:05:32.978 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:05:34.141 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:1110ms
2025-11-15 02:05:34.977 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1999ms, symbol=sz000001
2025-11-15 02:05:34.980 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 3ms, 记录数=8233
2025-11-15 02:05:34.987 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 6ms
2025-11-15 02:05:35.162 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 175ms, 记录数=8233
2025-11-15 02:05:35.205 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=8233
2025-11-15 02:05:41.028 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=8233, 耗时=5819ms, 平均=1.41/ms
2025-11-15 02:05:41.076 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 5913ms, 记录数=8233
2025-11-15 02:05:41.076 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sz000001, count=8233, 总耗时=8098ms (获取:1999ms, 转换:3ms, 分析:175ms, 插入:5913ms)
2025-11-15 02:05:41.222 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:05:45.476 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:05:45.745 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:268ms
2025-11-15 02:05:45.945 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 469ms, symbol=sz000001
2025-11-15 02:05:45.946 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 1ms, 记录数=8233
2025-11-15 02:05:45.947 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 1ms
2025-11-15 02:05:46.169 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 222ms, 记录数=8233
2025-11-15 02:05:46.184 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=8233
2025-11-15 02:06:13.677 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=8233, 耗时=27492ms, 平均=0.30/ms
2025-11-15 02:06:13.691 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 27522ms, 记录数=8233
2025-11-15 02:06:13.691 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sz000001, count=8233, 总耗时=28215ms (获取:469ms, 转换:1ms, 分析:222ms, 插入:27522ms)
2025-11-15 02:06:13.706 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:06:18.294 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:06:18.568 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:273ms
2025-11-15 02:06:18.885 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 590ms, symbol=sz000001
2025-11-15 02:06:18.892 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 6ms, 记录数=8233
2025-11-15 02:06:18.894 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 1ms
2025-11-15 02:06:19.058 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 164ms, 记录数=8233
2025-11-15 02:06:19.076 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=8233
2025-11-15 02:06:33.887 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=8233, 耗时=14811ms, 平均=0.56/ms
2025-11-15 02:06:33.905 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 14847ms, 记录数=8233
2025-11-15 02:06:33.905 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sz000001, count=8233, 总耗时=15610ms (获取:590ms, 转换:6ms, 分析:164ms, 插入:14847ms)
2025-11-15 02:06:33.908 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:06:40.600 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-15 02:06:40.606 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-15 02:42:42.632 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 15364 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:42:42.632 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:42:42.632 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:42:44.133 [main] WARN  o.s.w.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.StockDataFetchService] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b]
2025-11-15 02:42:44.261 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.StockDataFetchService] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b]
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:756)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:722)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:68)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:142)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:135)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.lang.NoClassDefFoundError: SinaStockClient
	at java.base/java.lang.Class.getDeclaredFields0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredFields(Class.java:3297)
	at java.base/java.lang.Class.getDeclaredFields(Class.java:2371)
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:751)
	... 95 common frames omitted
Caused by: java.lang.ClassNotFoundException: SinaStockClient
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 99 common frames omitted
2025-11-15 02:42:44.273 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.example.stock.service.StockHistoryFetchServiceTest@20ead579]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@63f9b562 testClass = com.example.stock.service.StockHistoryFetchServiceTest, locations = [], classes = [com.example.stock.StockApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2d710f1a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@48aca48b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5d534f5d, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1e0b4072, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@4b45a2f5, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53fe15ff, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@a0776d2a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.StockDataFetchService] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@63947c6b]
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:756)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:722)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:68)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:142)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:135)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: java.lang.NoClassDefFoundError: SinaStockClient
	at java.base/java.lang.Class.getDeclaredFields0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredFields(Class.java:3297)
	at java.base/java.lang.Class.getDeclaredFields(Class.java:2371)
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:751)
	... 95 common frames omitted
Caused by: java.lang.ClassNotFoundException: SinaStockClient
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 99 common frames omitted
2025-11-15 02:44:01.977 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 4476 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:44:01.978 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:44:01.979 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:44:06.182 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-15 02:44:11.289 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42401b81
2025-11-15 02:44:11.291 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-15 02:44:11.493 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15 02:44:14.752 [main] WARN  o.s.w.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockAnalysisController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockAnalysisController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockAnalysisService': Lookup method resolution failed
2025-11-15 02:44:14.755 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-15 02:44:16.247 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-15 02:44:16.324 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockAnalysisController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockAnalysisController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockAnalysisService': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1155)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1121)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1056)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stockAnalysisService': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1320)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1215)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1606)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 101 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.StockAnalysisService] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@70dea4e]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 114 common frames omitted
Caused by: java.lang.NoClassDefFoundError: com/example/stock/dto/StockAnalysisDTO
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2504)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 116 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.stock.dto.StockAnalysisDTO
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 120 common frames omitted
2025-11-15 02:44:16.357 [main] WARN  o.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.example.stock.service.StockHistoryFetchServiceTest@b859355]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@23f539df testClass = com.example.stock.service.StockHistoryFetchServiceTest, locations = [], classes = [com.example.stock.StockApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2c78324b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4b86805d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@33f676f6, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@35a3d49f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@478db956, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@7ba8c737, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@cbf767a2], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stockAnalysisController' defined in file [C:\workspace\IntelliJ-IDEA\stock-system\target\classes\com\example\stock\controller\StockAnalysisController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stockAnalysisService': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1155)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1121)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1056)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stockAnalysisService': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1320)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1215)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1606)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1552)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 101 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.example.stock.service.StockAnalysisService] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@70dea4e]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 114 common frames omitted
Caused by: java.lang.NoClassDefFoundError: com/example/stock/dto/StockAnalysisDTO
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2504)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 116 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.example.stock.dto.StockAnalysisDTO
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 120 common frames omitted
2025-11-15 02:44:38.754 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 12788 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:44:38.756 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:44:38.757 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:44:44.090 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-15 02:44:49.043 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27e21083
2025-11-15 02:44:49.047 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-15 02:44:49.118 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15 02:44:52.673 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-15 02:44:53.260 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Started StockHistoryFetchServiceTest in 15.149 seconds (process running for 16.457)
2025-11-15 02:44:53.952 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600000
2025-11-15 02:44:54.077 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:44:54.127 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-13, 将从2025-11-03开始处理，仅获取22天的数据
2025-11-15 02:44:54.723 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600000&scale=240&datalen=22&end_date=20251115 - 状态:200 OK, 耗时:558ms
2025-11-15 02:44:54.978 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 851ms, symbol=sh600000
2025-11-15 02:44:54.978 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=22
2025-11-15 02:44:54.978 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:44:54.978 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=22, 新记录数=1
2025-11-15 02:44:55.057 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=? 
        and sh1_0.trade_date<? 
    order by
        sh1_0.trade_date desc 
    limit
        1
2025-11-15 02:44:55.168 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 190ms, 记录数=1
2025-11-15 02:44:55.210 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=1
2025-11-15 02:44:55.253 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=1, 耗时=42ms, 平均=0.02/ms
2025-11-15 02:44:55.275 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 107ms, 记录数=1
2025-11-15 02:44:55.275 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sh600000, 新增数据数=1, 总耗时=1323ms (获取:851ms, 转换:0ms, 过滤:0ms, 分析:190ms, 插入:107ms)
2025-11-15 02:44:55.294 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:44:58.552 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:44:58.552 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:44:58.562 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中无此股票数据，将推出全量获取
2025-11-15 02:44:59.072 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:510ms
2025-11-15 02:44:59.573 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1011ms, symbol=sz000001
2025-11-15 02:44:59.575 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 1ms, 记录数=8233
2025-11-15 02:44:59.575 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:44:59.575 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=8233, 新记录数=8233
2025-11-15 02:44:59.742 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 167ms, 记录数=8233
2025-11-15 02:44:59.762 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=8233
2025-11-15 02:45:04.196 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=8233, 耗时=4432ms, 平均=1.86/ms
2025-11-15 02:45:04.228 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 4486ms, 记录数=8233
2025-11-15 02:45:04.228 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sz000001, 新增数据数=8233, 总耗时=5676ms (获取:1011ms, 转换:1ms, 过滤:0ms, 分析:167ms, 插入:4486ms)
2025-11-15 02:45:04.231 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:45:09.088 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh688001
2025-11-15 02:45:09.089 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:45:09.102 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中无此股票数据，将推出全量获取
2025-11-15 02:45:09.248 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh688001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:145ms
2025-11-15 02:45:09.273 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 170ms, symbol=sh688001
2025-11-15 02:45:09.275 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 2ms, 记录数=1533
2025-11-15 02:45:09.276 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 1ms
2025-11-15 02:45:09.276 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=1533, 新记录数=1533
2025-11-15 02:45:09.285 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 7ms, 记录数=1533
2025-11-15 02:45:09.295 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=1533
2025-11-15 02:45:10.492 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=1533, 耗时=1197ms, 平均=1.28/ms
2025-11-15 02:45:10.536 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 1251ms, 记录数=1533
2025-11-15 02:45:10.536 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sh688001, 新增数据数=1533, 总耗时=1448ms (获取:170ms, 转换:2ms, 过滤:0ms, 分析:7ms, 插入:1251ms)
2025-11-15 02:45:10.542 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:45:10.973 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600000
2025-11-15 02:45:10.974 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:45:11.003 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:45:11.104 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600000&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:99ms
2025-11-15 02:45:11.104 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 101ms, symbol=sh600000
2025-11-15 02:45:11.104 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:45:11.104 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:45:11.105 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:45:11.105 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600000的数据已是最新，没有新记录需要写入
2025-11-15 02:45:11.108 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:45:14.781 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:45:14.782 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:45:14.788 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:45:14.855 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:66ms
2025-11-15 02:45:14.856 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 68ms, symbol=sz000001
2025-11-15 02:45:14.857 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:45:14.857 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:45:14.857 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:45:14.858 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sz000001的数据已是最新，没有新记录需要写入
2025-11-15 02:45:14.861 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:45:20.092 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh688001
2025-11-15 02:45:20.092 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:45:20.092 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:45:20.162 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh688001&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:70ms
2025-11-15 02:45:20.163 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 71ms, symbol=sh688001
2025-11-15 02:45:20.163 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:45:20.163 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:45:20.163 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:45:20.163 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh688001的数据已是最新，没有新记录需要写入
2025-11-15 02:45:20.163 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:45:24.132 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-15 02:45:24.142 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-15 02:46:11.317 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 12528 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-15 02:46:11.318 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-15 02:46:11.319 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-15 02:46:14.170 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-15 02:46:19.182 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@35e75f7a
2025-11-15 02:46:19.182 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-15 02:46:19.261 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-15 02:46:22.485 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-15 02:46:22.918 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Started StockHistoryFetchServiceTest in 12.258 seconds (process running for 13.875)
2025-11-15 02:46:23.563 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600000
2025-11-15 02:46:23.648 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:23.722 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:46:24.245 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600000&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:488ms
2025-11-15 02:46:24.526 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 804ms, symbol=sh600000
2025-11-15 02:46:24.527 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:46:24.527 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:46:24.527 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:46:24.527 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600000的数据已是最新，没有新记录需要写入
2025-11-15 02:46:24.615 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:28.152 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:46:28.162 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:28.172 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中无此股票数据，将推出全量获取
2025-11-15 02:46:28.543 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=70000&end_date=20251115 - 状态:200 OK, 耗时:371ms
2025-11-15 02:46:29.047 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 875ms, symbol=sz000001
2025-11-15 02:46:29.050 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 2ms, 记录数=8233
2025-11-15 02:46:29.052 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 2ms
2025-11-15 02:46:29.053 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 1ms, 原数据=8233, 新记录数=8233
2025-11-15 02:46:29.207 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ K线分析耗时: 154ms, 记录数=8233
2025-11-15 02:46:29.247 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 一次性批量插入: 总记录数=8233
2025-11-15 02:46:33.967 [main] INFO  c.e.s.repository.StockHistoryCustomRepositoryImpl - 批量插入完成: 记录数=8233, 耗时=4719ms, 平均=1.74/ms
2025-11-15 02:46:34.017 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 批量插入耗时: 4810ms, 记录数=8233
2025-11-15 02:46:34.018 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ 成功保存股票历史数据: symbol=sz000001, 新增数据数=8233, 总耗时=5866ms (获取:875ms, 转换:2ms, 过滤:1ms, 分析:154ms, 插入:4810ms)
2025-11-15 02:46:34.020 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:38.616 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh688001
2025-11-15 02:46:38.617 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:38.634 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:46:38.701 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh688001&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:66ms
2025-11-15 02:46:38.702 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 68ms, symbol=sh688001
2025-11-15 02:46:38.702 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:46:38.702 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:46:38.702 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:46:38.702 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh688001的数据已是最新，没有新记录需要写入
2025-11-15 02:46:38.705 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:39.488 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600000
2025-11-15 02:46:39.489 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:39.505 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:46:39.700 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600000&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:195ms
2025-11-15 02:46:39.703 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 198ms, symbol=sh600000
2025-11-15 02:46:39.705 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:46:39.705 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:46:39.705 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:46:39.706 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600000的数据已是最新，没有新记录需要写入
2025-11-15 02:46:39.715 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:43.666 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sz000001
2025-11-15 02:46:43.666 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:43.680 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:46:43.750 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sz000001&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:69ms
2025-11-15 02:46:43.751 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 70ms, symbol=sz000001
2025-11-15 02:46:43.751 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:46:43.751 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:46:43.751 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:46:43.751 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sz000001的数据已是最新，没有新记录需要写入
2025-11-15 02:46:43.753 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:48.964 [main] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh688001
2025-11-15 02:46:48.964 [main] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-15 02:46:48.977 [main] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-14, 将从2025-11-04开始处理，仅获取21天的数据
2025-11-15 02:46:49.046 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh688001&scale=240&datalen=21&end_date=20251115 - 状态:200 OK, 耗时:68ms
2025-11-15 02:46:49.048 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 71ms, symbol=sh688001
2025-11-15 02:46:49.048 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-15 02:46:49.048 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-15 02:46:49.048 [main] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-15 02:46:49.048 [main] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh688001的数据已是最新，没有新记录需要写入
2025-11-15 02:46:49.054 [main] DEBUG org.hibernate.SQL - 
    select
        sh1_0.id,
        sh1_0.amplitude,
        sh1_0.body_ratio,
        sh1_0.boll_lower,
        sh1_0.boll_middle,
        sh1_0.boll_upper,
        sh1_0.change_percent,
        sh1_0.close,
        sh1_0.code,
        sh1_0.consecutive_rise_days,
        sh1_0.trade_date,
        sh1_0.high,
        sh1_0.is_break_high,
        sh1_0.is_break_low,
        sh1_0.is_doji,
        sh1_0.is_hammer,
        sh1_0.is_inverted_hammer,
        sh1_0.is_ma10_death_cross,
        sh1_0.is_ma10_golden_cross,
        sh1_0.is_ma5_death_cross,
        sh1_0.is_ma5_golden_cross,
        sh1_0.is_ma_bearish,
        sh1_0.is_ma_bullish,
        sh1_0.is_macd_death_cross,
        sh1_0.is_macd_golden_cross,
        sh1_0.is_overbought,
        sh1_0.is_oversold,
        sh1_0.is_price_volume_match,
        sh1_0.is_touch_boll_lower,
        sh1_0.is_touch_boll_upper,
        sh1_0.is_volume_shrink,
        sh1_0.is_volume_surge,
        sh1_0.kline_type,
        sh1_0.low,
        sh1_0.lower_shadow_ratio,
        sh1_0.ma_price10,
        sh1_0.ma_price30,
        sh1_0.ma_price5,
        sh1_0.ma_volume10,
        sh1_0.ma_volume30,
        sh1_0.ma_volume5,
        sh1_0.macd_bar,
        sh1_0.macd_dea,
        sh1_0.macd_dif,
        sh1_0.open,
        sh1_0.rsi12,
        sh1_0.rsi24,
        sh1_0.rsi6,
        sh1_0.symbol,
        sh1_0.turnover_rate,
        sh1_0.upper_shadow_ratio,
        sh1_0.volume,
        sh1_0.volume_ratio 
    from
        stock_history sh1_0 
    where
        sh1_0.symbol=?
2025-11-15 02:46:52.903 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-15 02:46:53.954 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
