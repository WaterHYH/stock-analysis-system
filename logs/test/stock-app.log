2025-11-21 00:16:00.583 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Starting StockHistoryFetchServiceTest using Java 17.0.7 with PID 9108 (started by water in C:\workspace\IntelliJ-IDEA\stock-system)
2025-11-21 00:16:00.583 [main] DEBUG c.e.stock.service.StockHistoryFetchServiceTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-11-21 00:16:00.583 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - The following 1 profile is active: "test"
2025-11-21 00:16:03.123 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-21 00:16:14.382 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52f43225
2025-11-21 00:16:14.382 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-21 00:16:15.725 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 00:16:22.172 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-21 00:16:22.566 [main] INFO  c.e.stock.service.StockHistoryFetchServiceTest - Started StockHistoryFetchServiceTest in 22.6 seconds (process running for 23.975)
2025-11-21 00:16:23.566 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始批量获取所有A股股票历史数据...
2025-11-21 00:16:23.566 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 正在获取沪市主板股票数据 (600-605)...
2025-11-21 00:16:23.566 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600000
2025-11-21 00:16:23.660 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:25.408 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:28.137 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600000&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:2697ms
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 2906ms, symbol=sh600000
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600000的数据已是最新，没有新记录需要写入
2025-11-21 00:16:28.314 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600001
2025-11-21 00:16:28.314 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:28.392 [main] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600087&scale=240&datalen=70000&end_date=20251121 - 状态:200 OK, 耗时:1749ms
2025-11-21 00:16:29.428 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2009-12-15, 将从2009-12-05开始处理，仅获取5840天的数据
2025-11-21 00:16:29.993 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600001&scale=240&datalen=5840&end_date=20251121 - 状态:200 OK, 耗时:565ms
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 2845ms, symbol=sh600001
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=2753
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=2753, 新记录数=0
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600001的数据已是最新，没有新记录需要写入
2025-11-21 00:16:32.273 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600002
2025-11-21 00:16:32.273 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:34.226 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2006-04-06, 将从2006-03-27开始处理，仅获取7189天的数据
2025-11-21 00:16:35.151 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600002&scale=240&datalen=7189&end_date=20251121 - 状态:200 OK, 耗时:925ms
2025-11-21 00:16:35.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1360ms, symbol=sh600002
2025-11-21 00:16:35.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=1912
2025-11-21 00:16:35.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:35.624 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=1912, 新记录数=0
2025-11-21 00:16:35.624 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600002的数据已是最新，没有新记录需要写入
2025-11-21 00:16:35.624 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600003
2025-11-21 00:16:35.626 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:36.741 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2009-03-13, 将从2009-03-03开始处理，仅获取6117天的数据
2025-11-21 00:16:37.258 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600003&scale=240&datalen=6117&end_date=20251121 - 状态:200 OK, 耗时:517ms
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1462ms, symbol=sh600003
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=2251
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=2251, 新记录数=0
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600003的数据已是最新，没有新记录需要写入
2025-11-21 00:16:38.203 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600004
2025-11-21 00:16:38.203 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:39.318 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:39.756 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600004&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:438ms
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 987ms, symbol=sh600004
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600004的数据已是最新，没有新记录需要写入
2025-11-21 00:16:40.305 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600005
2025-11-21 00:16:40.305 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:41.927 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2017-01-23, 将从2017-01-13开始处理，仅获取3244天的数据
2025-11-21 00:16:42.570 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600005&scale=240&datalen=3244&end_date=20251121 - 状态:200 OK, 耗时:643ms
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 8112ms, symbol=sh600005
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=3244
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=3244, 新记录数=0
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600005的数据已是最新，没有新记录需要写入
2025-11-21 00:16:50.039 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600006
2025-11-21 00:16:50.039 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:51.162 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:51.596 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600006&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:432ms
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 435ms, symbol=sh600006
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600006的数据已是最新，没有新记录需要写入
2025-11-21 00:16:51.597 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600007
2025-11-21 00:16:51.599 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:52.153 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:52.586 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600007&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:428ms
2025-11-21 00:16:52.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 433ms, symbol=sh600007
2025-11-21 00:16:52.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:52.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:52.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:52.586 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600007的数据已是最新，没有新记录需要写入
2025-11-21 00:16:52.602 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600008
2025-11-21 00:16:52.602 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:53.157 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:53.801 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600008&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:644ms
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 644ms, symbol=sh600008
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600008的数据已是最新，没有新记录需要写入
2025-11-21 00:16:53.801 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600009
2025-11-21 00:16:53.817 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:54.933 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:56.751 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600009&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:1816ms
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1833ms, symbol=sh600009
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600009的数据已是最新，没有新记录需要写入
2025-11-21 00:16:56.766 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600010
2025-11-21 00:16:56.766 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:16:57.882 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:16:59.535 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600010&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:1653ms
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1653ms, symbol=sh600010
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600010的数据已是最新，没有新记录需要写入
2025-11-21 00:16:59.535 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600011
2025-11-21 00:16:59.535 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:17:00.648 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 数据库中最新记录: 2025-11-20, 将从2025-11-10开始处理，仅获取21天的数据
2025-11-21 00:17:02.191 [stock-sync-1] DEBUG com.example.stock.config.RestTemplateConfig - HTTP请求: https://money.finance.sina.com.cn/quotes_service/api/json_v2.php/CN_MarketData.getKLineData?symbol=sh600011&scale=240&datalen=21&end_date=20251121 - 状态:200 OK, 耗时:1543ms
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 获取数据耗时: 1543ms, symbol=sh600011
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据转换耗时: 0ms, 记录数=21
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 数据排序完成，按日期降序排列，耗时: 0ms
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ⏱️ 过滤新记录耗时: 0ms, 原数据=21, 新记录数=0
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - ✅ symbol=sh600011的数据已是最新，没有新记录需要写入
2025-11-21 00:17:02.191 [stock-sync-1] INFO  c.example.stock.service.StockHistoryFetchService - 开始获取股票历史数据: symbol=sh600012
2025-11-21 00:17:02.191 [stock-sync-1] DEBUG org.hibernate.SQL - 
    SELECT
        MAX(trade_date) 
    FROM
        stock_history 
    WHERE
        symbol = ? 
2025-11-21 00:17:02.614 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-21 00:17:02.640 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-21 00:17:02.643 [stock-sync-1] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@99e084 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
2025-11-21 00:17:02.643 [stock-sync-1] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-11-21 00:17:02.643 [stock-sync-1] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HikariPool-1 - Interrupted during connection acquisition
